["function _9de03ebf50e28981a7da9365bad14c0b47a9169a",50,1571,"data){Financial.data={}}if(!Financial.model){Financial.model={}}if(!Financial.store){Financial.store={}}if(!Financial.util){Financial.util",1603,484846,"Ext.define(\"Financial.util.PaintMonitor\",{override:\"Ext.util.PaintMonitor\",constructor:function(a",486297,35,"CssAnimation(a)}},function(){}",486447,7019,"Ext.define(\"Financial.util.SizeMonitor\",{override:\"Ext.util.SizeMoni",257128,39,493109,168,"&&!Ext.browser.engineVersion.ltEq(\"537.36\")",493151,38,493315,94,"Scroll(a)}}}}},function(){}",486447,46,493510,75136,144314,38,"money:function(a){return a;return Ext.util.Format.number(a,\"0,0.00\")}},0,0,0,0,0,0,[Financial",146600,37,"Financial.data.AbstractData\",Ext.Base,{getStore:function(){return Ext.StoreManager.lookup(this.storeId)||Ext.create(this.storeClass)},getById:function(b){if(!this.cache[b]){var a=this.getStore();this.cache[b]=a.getAt(a.findExact(\"id\",b.toString()))}return this.cache[b]}},0,0,0,0,0,0,[Financial.data,\"AbstractData",570576,34,"model.Expense\",Ext.data.Model,{config:{fields:[{name:\"id\",type:\"int\"},{name:\"sum\",type:\"float\",defaultValue:\"\"},{name:\"currency_id\",type:\"int\"},{name:\"item\",type:\"string\"},{name:\"created_at\",type:\"date\"},{name:\"status\",type:\"string\"},{name:\"users\",convert:function(b){var a=[];Ext.each(b,function(c){a.push(parseInt(c.hasOwnProperty(\"id\")?c.id:c))});return a}},{name:\"categories\",convert:function(a){var b=[];Ext.each(a,function(c){b.push(parseInt(c.hasOwnProperty(\"id\")?c.id:c))});return b}}]}},0,0,0,0,0,0,[Financial.model,\"Expense",570576,34,"store.Expense\",Ext.data.Store,{config:{storeId:\"expense\",model:\"Financial.model.Expense\",autoLoad:false,autoDestroy:false,sorters:[{property:\"created_at\",direction:\"DESC\"},{property:\"id\",direction:\"DESC\"}],proxy:{type:\"ajax\",reader:{type:\"json\"},extraParams:{start_date:(function(){var a=new Date();a.setDate(1);return Ext.util.Format.date(a,\"Y-m-d\")}()),end_date:(function(){var a=new Date();a.setMonth(a.getMonth()+1);a.setDate(0);return Ext.util.Format.date(a,\"Y-m-d\")}())},api:{read:Financial.routes.expense.list,create:Financial.routes.expense.create,update:Financial.routes.expense.update,destroy:Financial.routes.expense.destroy},writer:{type:\"json\",writeAllFields:false,rootProperty:\"data\"}}}},0,0,0,0,0,0,[Financial.store,\"Expense",570576,34,"data.Expense\",Financial.data.AbstractData,{singleton:true,cache:{},storeId:\"expense\",storeClass:\"Financial.store.Expense\"},0,0,0,0,0,0,[Financial.data,\"Expense",570576,44,568656,49,"\"vbox\",defaults:{flex:1",568717,96,"]},{xtype:\"list\",getStore:function(){return Financial.data.Expense.getStore()},itemTpl:['<div class=\"clearfix\"><b class=\"left\">{item}</b> <span class=\"right money red\">{sum:this.formatSum} {currency_id:this.formatCurrency}</span><br><br><i class=\"left\">{created_at:this.formatDate}</i> <span class=\"right\">{users:this.formatUsers}</span><tpl if=\"categories.length\"><br>{categories:this.formatCategories}</tpl></div>',{formatSum:function(a){return Financial.util.Format.money(a)},formatCurrency:function(a){return Financial.data.Currency.getById(a).get(\"symbol\")},formatDate:function(a){return Ext.util.Format.date(a,\"D d-m-Y\")},formatUsers:function(a){var b=[];Ext.each(a,function(c){b.push(Financial.data.User.getById(c).get(\"first_name\"))});return b.join(\", \")},formatCategories:function(b){var a=[];Ext.each(b,function(c){a.push(Financial.data.Category.getById(c).get(\"name\"))});return a.join(\", \")",541102,37,299660,35,"Store().on(\"refresh\",function(){a.refresh()})}",569984,256,"model.Income\",Ext.data.Model,{config:{fields:[{name:\"id\",type:\"int\"},{name:\"sum\",type:\"float\",defaultValue:\"\"},{name:\"description\",type:\"string\"},{name:\"created_at\",type:\"date\"},{name:\"user_id\",type:\"int\"}]}},0,0,0,0,0,0,[Financial.model,\"Income",570576,34,"store.Income\",Ext.data.Store,{config:{storeId:\"income\",model:\"Financial.model.Income\",autoLoad:false,autoDestroy:true,sorters:[{property:\"created_at\",direction:\"DESC\"},{property:\"id\",direction:\"DESC\"}],proxy:{type:\"ajax\",reader:{type:\"json\"},extraParams:{start_date:(function(){var a=new Date();a.setDate(1);return Ext.util.Format.date(a,\"Y-m-d\")}()),end_date:(function(){var a=new Date();a.setMonth(a.getMonth()+1);a.setDate(0);return Ext.util.Format.date(a,\"Y-m-d\")}())},api:{read:Financial.routes.income.list,create:Financial.routes.income.create,update:Financial.routes.income.update,destroy:Financial.routes.income.destroy},writer:{type:\"json\",writeAllFields:false,rootProperty:\"data\"}}}},0,0,0,0,0,0,[Financial.store,\"Income",570576,34,"data.Income\",Financial.data.AbstractData,{singleton:true,cache:{},storeId:\"income\",storeClass:\"Financial.store.Income\"},0,0,0,0,0,0,[Financial.data,\"Income",570576,44,"tabPanel.Incom",568671,34,"\"vbox\",defaults:{flex:1",568717,96,"]},{xtype:\"list\",getStore:function(){return Financial.data.Income.getStore()},itemTpl:\"{description}\"",310606,34,299660,35,"Store().on(\"refresh\",function(){a.refresh()})}}]}},0,[\"main-tabPanel-incom",570013,45,"incom",570064,51,"incom",570121,33,"incom",570160,38,"Incomes",570576,44,"tabPanel.User\",Ext.Panel",570278,152,"panel",570427,55,"panel",570476,177,570664,63,"defaults:{cls:\"card\",layout:\"vbox\",defaults:{flex:1}",570725,40,570776,39,570826,59,"iconCls:\"organize\",items:[{xtype:\"main-tabPanel-incomes\"}]},{title:\"Settings",570943,36,570990,68,"P",544631,42,",\"main-tabP",544668,51,",\"main-tabPanel\":true},[\"widget.main-tabP",571204,78,"main",572179,464,"main-login",572652,49,"main-login",302032,34,"panel:true,formpanel:true,\"main-login\":true},[\"widget.main-login\"],0,[Financial.view.main,\"Login",570576,39,571282,43,"defaults:{flex:1}}},0,[\"main",570015,33,302032,34,571441,95,"Abstract\",Ext.app.Controller,{subControllers:[],initSubControllers:function(){var b=this,a=b.subControllers;if(!Ext.isArray(a)){a=[a]}Ext.require(a,function(){Ext.each(a,function(c){Ext.create(c,{application:b.getApplication()}).init()})})},init:function(){this.initSubControllers()",573894,38,160320,32,"Financial.model.Currency\",Ext.data.Model,{config:{fields:[{name:\"id\",type:\"int\"},{name:\"symbol\",type:\"string\"},{name:\"iso_code\",type:\"string\"},{name:\"currency\",type:\"string\"},{name:\"rates\"}]}},0,0,0,0,0,0,[Financial.model,\"Currency",570576,34,"store.Currency\",Ext.data.Store,{config:{model:\"Financial.model.Currency\",storeId:\"currency\",proxy:{type:\"memory\"},autoDestroy:false}},0,0,0,0,0,0,[Financial.store,\"Currency",570576,34,"data.Currency\",Financial.data.AbstractData,{singleton:true,cache:{},storeId:\"currency\",storeClass:\"Financial.store.Currency\",setCurrency:function(a){Financial.data.currency=Ext.JSON.decode(a.responseText);Financial.data.Currency.getStore().setData(Ext.Object.getValues(Financial.data.currency.map))},getDefaultCurrency:function(){return this.getById(Financial.data.currency[\"default\"])},convert:function(a,c,b){if(Ext.isNumeric(c)){c=this.getById(c)}else{if(Ext.isString(c)){c=this.getCurrencyByISOCode(c)}}if(Ext.isNumeric(b)){b=this.getById(b)}else{if(Ext.isString(b)){b=this.getCurrencyByISOCode(b)}}if(c.get(\"iso_code\")===b.get(\"iso_code\")){return a}return a*c.get(\"rates\")[b.get(\"iso_code\")]},convertToDefault:function(a,b){return this.convert(a,b,this.getDefaultCurrency())},getCurrencyByISOCode",367536,35,"return a.getAt(a.findExact(\"iso_code\",b))}},0,0,0,0,0,0,[Financial.data,\"Currency",570576,34,"model.User\",Ext.data.Model,{config:{fields:[{name:\"id\",type:\"int\"},{name:\"first_name\",type:\"string\"},{name:\"last_name\",type:\"string\"},{name:\"full_name\",type:\"string\"}]}},0,0,0,0,0,0,[Financial.mod",570568,42,"store.User\",Ext.data.Store,{config:{model:\"Financial.model.User\",storeId:\"user\",proxy:{type:\"memory\"},autoDestroy:false}},0,0,0,0,0,0,[Financial.store",570570,40,"data.User\",Financial.data.AbstractData,{singleton:true,cache:{},storeId:\"user\",storeClass:\"Financial.store.User\",getAllIds:function(){return Ext.Array.map(this.getStore().data.items,function(a){return a.get(\"id\")})}},0,0,0,0,0,0,[Financial.data",570570,40,"model.Category\",Ext.data.Model,{config:{fields:[{name:\"id\",type:\"int\"},{name:\"name\",type:\"string\"},{name:\"expenses\",convert:function(a){return a.length}}]}},0,0,0,0,0,0,[Financial.model,\"Category",570576,34,"store.Category\",Ext.data.Store,{config:{model:\"Financial.model.Category\",proxy:{type:\"ajax\",reader:{type:\"json\"},api:{read:Financial.routes.category.list,create:Financial.routes.category.create,update:Financial.routes.category.update},writer:{type:\"json\",writeAllFields:false,rootProperty:\"data\"}},storeId:\"category\",autoDestroy:false,sorters:[{property:\"expenses\",direction:\"DESC\"}]}},0,0,0,0,0,0,[Financial.store,\"Category",570576,34,"data.Category\",Financial.data.AbstractData,{singleton:true,cache:{},storeId:\"category\",storeClass:\"Financial.store.Category\"},0,0,0,0,0,0,[Financial.data,\"Category",570576,34,"controller.Main\",Financial.controller.Abstract,{subControllers:[\"Financial.controller.main.Login\",\"Financial.controller.main.TabPanel\"],config:{refs:{mainView:\"main\"}},launch:function(){var c=this,b=c.getMainView();b.setMasked({xtype:\"loadmask\"});if(Financial.data.user){var d=2;function a(){d--;if(d===0){c.show(\"tabPanel\")}}Financial.data.Category.getStore().load(a);Ext.each([{success:function(e){Financial.data.Currency.setCurrency(e)},url:Financial.routes.getCurrencies}],function(e){Ext.Ajax.request({url:e.url,success:function(){e.success.apply(e,arguments);a()},failure:function(){Ext.Msg.show({message:\"There was an error while trying to fetch data.<br>Please come back later.\",title:\"Error\",closable:false,draggable:false})}})})}else{Ext.Ajax.request({url:Financial.routes.user.list,success:function(e){Financial.data.user=Ext.JSON.decode(e.responseText);Financial.data.User.getStore().setData(Financial.data.user.list);c.launch()},failure:function(){c.show(\"login\")}})}},show:function(b){var a=this.getMainView();a.setMasked(false);a.removeAll();a.add({xtype:Ext.String.format(\"main-{0}\",b)})",573894,38,"Main\"],0));Ext.Loader.setConfig({disableCaching:true}",573942,55,"],views:[\"Ma",574002,548,"Ext.fly(\"appLoadingIndicator\").destroy",574589,55,575033,205]